<ul class="menu">
    <li {% if request.resolver_match.url_name == 'main' %} class="active" {% endif %} ><a href="{% url 'main' %}">Главная</a></li>

    <li>
        <a href = "{% url 'products:catalog' %}"
            class = "{% if request.resolver_match.namespace == 'products' %}
                    active
                {%endif%}">
            Каталог
        </a>
    </li>

    <li {% if request.resolver_match.url_name == 'gallery' %} class="active" {% endif %} ><a href="{% url 'gallery' %}">Галерея</a></li>

    <!--
    <li { if request.resolver_match.url_name == 'cart' } class="active" { endif } ><a href="{ url 'cart' }">Корзина</a></li>
    -->

    <li {% if request.resolver_match.url_name == 'contacts' %} class="active" {% endif %} ><a href="{% url 'contacts' %}">Контакты</a></li>

    {% if user.is_authenticated %}
        <li>
            <a href = "{% url 'auth:edit' %}">
                {{ user.username }} <!-- user.first_name|default:'Пользователь' -->
            </a>
        </li>
    {% endif %}

    <li>
        {% if user.is_authenticated %}
            <a href="{% url 'auth:logout' %}">выход</a>
        {% else %}
            <a href="{% url 'auth:login' %}">вход</a>
        {% endif %}
    </li>

</ul>

<a href="{% url 'basket:view' %}" class = "basket">
    <span>
        {% if basket %} ___{{ basket|length }} {% endif %}
    </span>
 </a>
